!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("zMultiCache",[],t):"object"==typeof exports?exports.zMultiCache=t():e.zMultiCache=t()}(window,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="./src/index.js")}({"./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! exports provided: factory */function(e,t,r){"use strict";r.r(t);var n=r(/*! ./store */"./src/store.js");r.d(t,"factory",function(){return n.factory})},"./src/storages/index.js":
/*!*******************************!*\
  !*** ./src/storages/index.js ***!
  \*******************************/
/*! exports provided: storagesList, storagesMap, Storage, default */function(e,t,r){"use strict";r.r(t),r.d(t,"storagesList",function(){return i}),r.d(t,"storagesMap",function(){return u}),r.d(t,"Storage",function(){return d});var n=r(/*! ./memoryStorage */"./src/storages/memoryStorage.js");function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a={localStorage:localStorage,sessionStorage:sessionStorage,memoryStorage:n.default},i=Object.keys(a),c=i.join(", "),u=i.reduce(function(e,t){return e[t]=t,e},{});function s(e){if(!u[e])throw new Error("type should be one of: ".concat(c,", your value is: ").concat(e))}function f(e,t){s(e);var r=a[e].getItem(t);return JSON.parse(r)||{}}function l(e,t,r,n){s(e);try{var o=JSON.stringify(r);a[e].setItem(t,o)}catch(e){n&&n(e)}}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,r){t&&o(e.prototype,t),r&&o(e,r)}(e,[{key:"setItem",value:function(e,t,r,n,o){var a=f(e,t);a[r]=n,l(e,t,a,o)}},{key:"getItem",value:function(e,t,r){return f(e,t)[r]}},{key:"removeItem",value:function(e,t,r){delete f(e,t)[r],l(e,t,r)}},{key:"clear",value:function(e,t){l(e,t,{})}}]),e}(),v=new d;t.default=v},"./src/storages/memoryStorage.js":
/*!***************************************!*\
  !*** ./src/storages/memoryStorage.js ***!
  \***************************************/
/*! exports provided: MemoryStorage, default */function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.r(t),r.d(t,"MemoryStorage",function(){return o});var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"storage",{})}return function(e,t,r){t&&n(e.prototype,t),r&&n(e,r)}(e,[{key:"setItem",value:function(e,t){this.storage[e]=String(t)}},{key:"getItem",value:function(e){return this.storage[e]||null}},{key:"removeItem",value:function(e){delete this.storage[e]}},{key:"clear",value:function(){this.storage={}}}]),e}(),a=new o;t.default=a},"./src/store.js":
/*!**********************!*\
  !*** ./src/store.js ***!
  \**********************/
/*! exports provided: factory, default */function(e,t,r){"use strict";r.r(t),r.d(t,"factory",function(){return p});var n=r(/*! @storages/index */"./src/storages/index.js");var o="$zMultiCachePrefix$",a="$page$",i=n.storagesMap.sessionStorage,c=function(){},u=n.storagesList.join(", ");function s(e){return Object.prototype.toString.call(e).slice(8,-1).toLocaleLowerCase()}function f(e,t,r,n){if(e)if(d(r)){var o=t.globalKeys;if("array"!==s(o))throw new Error("globalKeys need to be an array.");if(!o.some(function(e){return e===n}))throw new Error('key "'.concat(n,'" should be defined in globalKeys firstly.'))}else{var a=t.pages;if("array"!==s(a))throw new Error("pages need to be an array.");if(!a.some(function(e){return e===r}))throw new Error('the page part of scope "'.concat(r,'" should be defined in pages firstly.'))}}function l(e){var t=e.type;if(!n.storagesMap[t])throw new Error("type should be one of: ".concat(u,", your value is: ").concat(t));return!0}function d(e){return"global"===e}function v(e,t,r){if("string"!=typeof e)throw new Error("scope need to be a string.");var n=(e=e.replace(/\s*\/?\s*$/g,"")).indexOf(r),o=-1!==n,a=e.slice(0,o?n:void 0).trim(),i=e.substr(o?n+r.length:e.length).trim();i=i.length?"".concat(i,">"):"".concat(i);var c=d(a)?"".concat(t):"".concat(i).concat(t);return{page:a||void 0,itemKey:c}}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ns,r=void 0===t?"$ns$":t,u=e.strict,d=void 0!==u&&u,p=e.template,y=void 0===p?{}:p,g=e.scopeSeparator,m=void 0===g?"/":g;if(d&&!function(e){return"object"===s(e)}(y))throw new Error('when "strict" is true, template is needed. template is a simple object.');var b="".concat(o,"-").concat(r),h={setItem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.type,u=void 0===o?i:o,s=r.scope,p=void 0===s?"":s,g=r.errCallBack,h=void 0===g?c:g;l({type:u});var w=v(p,e,m),j=w.page,S=void 0===j?a:j,x=w.itemKey;f(d,y,S,x);var O="".concat(b,"-").concat(S);n.default.setItem(u,O,x,t,h)},getItem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.type,o=void 0===r?i:r,c=t.scope,u=void 0===c?"":c,s=t.defaultValue;l({type:o});var p=v(u,e,m),g=p.page,h=void 0===g?a:g,w=p.itemKey;f(d,y,h,w);var j="".concat(b,"-").concat(h),S=n.default.getItem(o,j,w);return"function"==typeof s&&(function(e){throw new Error('"'+e+'" is read-only')}("defaultValue"),s=s()),void 0===S||null===S?s:S},removeItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.type,n=void 0===r?i:r,o=t.scope,c=void 0===o?"":o;l({type:n});var u=v(c,e,m),s=u.page,p=void 0===s?a:s,g=u.itemKey;f(d,y,p,g);var w="".concat(b,"-").concat(p);h.removeItem(n,w,g)},clear:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=void 0===t?i:t,n=e.scope,o=void 0===n?"":n;l({type:r});var c=v(o,"",m),u=c.page,s=void 0===u?a:u,p=c.itemKey;f(d,y,s,p);var g="".concat(b,"-").concat(s);h.clear(r,g)},types:n.storagesMap};return h}var y=p();t.default=y}})});
//# sourceMappingURL=index.js.map